<div class="container">
  <div class="row">
    <% flash.each do |message_type, message| %>
      <%= content_tag(:div, message, class: "alert alert-#{message_type}") %>
    <% end %>
  </div>
  <table class="table table-striped">
    <thead>
      <tr>
	<th>Firstname</th>
	<th>Lastname</th>
	<th>Address</th>
	<th>SSN</th>
      </tr>
    </thead>
    <tbody>
      <% for patient in @patients %>
	<tr>
	  <td><%= patient.firstname %></td>
	  <td><%= patient.lastname %></td>
	  <td><%= patient.zip %> <%= patient.city %>, <%= patient.street %></td>
	  <td><%= patient.ssn %> <%= patient.birthdate %></td>
	  <td>
	    <div class="btn-toolbar">
	      <div class="btn-group">
		<button type="button" class="btn dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
		  Options<span class="caret"></span>
		</button>
		<ul class="dropdown-menu" role="menu">
		  <li><%= link_to 'New Consultation', new_patient_consultation_path(patient) %></li>
		  <% if patient.consultations.any? %>
		    <li><%= link_to 'List Consultation', patient_consultations_path(patient) %></li>
		  <% else %>
		    <li><a href="#">List Consultations</a></li>
		  <% end %>
		  <li><%= link_to 'New Receipt', new_patient_receipt_path(patient)%></li>
		  <li><a href="#">List receipts</a></li>
		  <li><%= link_to 'Show details', patient %></li>
		  <li><%= link_to 'Edit', edit_patient_path(patient) %></li>
		  <li><%= link_to 'Delete', patient, method: :delete, data: { confirm: "Are you sure?"} %></li>
		</ul>
	      </div>
	    </div>
	  </td>
	</tr>
      <% end %>
    </tbody>
</table>
</div>
